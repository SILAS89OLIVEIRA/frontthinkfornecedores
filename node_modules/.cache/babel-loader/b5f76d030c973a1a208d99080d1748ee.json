{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\thinkfornecedoresfront\\\\src\\\\components\\\\googledrive\\\\googledrive.js\";\nimport React, { useState } from 'react';\nimport { Row, Col, Spin } from 'antd';\nimport styled from 'styled-components';\nimport { gapi } from 'gapi-script';\nimport GoogleDriveImage from '../../assets/images/google-drive.png';\nimport ListDocuments from '../ListDocuments';\nimport { style } from './styles';\nconst NewDocumentWrapper = styled.div`\n  ${style}\n`; // Client ID and API key from the Developer Console\n\nconst CLIENT_ID = process.env.REACT_APP_GOOGLE_DRIVE_CLIENT_ID;\nconst API_KEY = process.env.REACT_APP_GOOGLE_DRIVE_API_KEY; // Array of API discovery doc URLs for APIs\n\nconst DISCOVERY_DOCS = ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest']; // Authorization scopes required by the API; multiple scopes can be\n// included, separated by spaces.\n\nconst SCOPES = 'https://www.googleapis.com/auth/drive.metadata.readonly';\n\nconst SelectSource = () => {\n  const [listDocumentsVisible, setListDocumentsVisibility] = useState(false);\n  const [documents, setDocuments] = useState([]);\n  const [isLoadingGoogleDriveApi, setIsLoadingGoogleDriveApi] = useState(false);\n  const [isFetchingGoogleDriveFiles, setIsFetchingGoogleDriveFiles] = useState(false);\n  const [signedInUser, setSignedInUser] = useState();\n\n  const handleChange = file => {};\n  /**\r\n   * Print files.\r\n   */\n\n\n  const listFiles = (searchTerm = null) => {\n    setIsFetchingGoogleDriveFiles(true);\n    gapi.client.drive.files.list({\n      pageSize: 10,\n      fields: 'nextPageToken, files(id, name, mimeType, modifiedTime)',\n      q: searchTerm\n    }).then(function (response) {\n      setIsFetchingGoogleDriveFiles(false);\n      setListDocumentsVisibility(true);\n      const res = JSON.parse(response.body);\n      setDocuments(res.files);\n    });\n  };\n  /**\r\n   *  Sign in the user upon button click.\r\n   */\n\n\n  const handleAuthClick = event => {\n    gapi.auth2.getAuthInstance().signIn();\n  };\n  /**\r\n   *  Called when the signed in status changes, to update the UI\r\n   *  appropriately. After a sign-in, the API is called.\r\n   */\n\n\n  const updateSigninStatus = isSignedIn => {\n    if (isSignedIn) {\n      // Set the signed in user\n      setSignedInUser(gapi.auth2.getAuthInstance().currentUser.je.Qt);\n      setIsLoadingGoogleDriveApi(false); // list files if user is authenticated\n\n      listFiles();\n    } else {\n      // prompt user to sign in\n      handleAuthClick();\n    }\n  };\n  /**\r\n   *  Sign out the user upon button click.\r\n   */\n\n\n  const handleSignOutClick = event => {\n    setListDocumentsVisibility(false);\n    gapi.auth2.getAuthInstance().signOut();\n  };\n  /**\r\n   *  Initializes the API client library and sets up sign-in state\r\n   *  listeners.\r\n   */\n\n\n  const initClient = () => {\n    setIsLoadingGoogleDriveApi(true);\n    gapi.client.init({\n      apiKey: API_KEY,\n      clientId: CLIENT_ID,\n      discoveryDocs: DISCOVERY_DOCS,\n      scope: SCOPES\n    }).then(function () {\n      // Listen for sign-in state changes.\n      gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus); // Handle the initial sign-in state.\n\n      updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n    }, function (error) {});\n  };\n\n  const handleClientLoad = () => {\n    gapi.load('client:auth2', initClient);\n  };\n\n  const showDocuments = () => {\n    setListDocumentsVisibility(true);\n  };\n\n  const onClose = () => {\n    setListDocumentsVisibility(false);\n  };\n\n  return /*#__PURE__*/React.createElement(NewDocumentWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    gutter: 16,\n    className: \"custom-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ListDocuments, {\n    visible: listDocumentsVisible,\n    onClose: onClose,\n    documents: documents,\n    onSearch: listFiles,\n    signedInUser: signedInUser,\n    onSignOut: handleSignOutClick,\n    isLoading: isFetchingGoogleDriveFiles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    span: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Spin, {\n    spinning: isLoadingGoogleDriveApi,\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onClick: () => handleClientLoad(),\n    className: \"source-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"icon-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"icon icon-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    height: \"80\",\n    width: \"80\",\n    src: GoogleDriveImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, \"Google Drive\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, \"Import documents straight from your google drive\")))))));\n};\n\nexport default SelectSource;","map":{"version":3,"sources":["C:/wamp64/www/thinkfornecedoresfront/src/components/googledrive/googledrive.js"],"names":["React","useState","Row","Col","Spin","styled","gapi","GoogleDriveImage","ListDocuments","style","NewDocumentWrapper","div","CLIENT_ID","process","env","REACT_APP_GOOGLE_DRIVE_CLIENT_ID","API_KEY","REACT_APP_GOOGLE_DRIVE_API_KEY","DISCOVERY_DOCS","SCOPES","SelectSource","listDocumentsVisible","setListDocumentsVisibility","documents","setDocuments","isLoadingGoogleDriveApi","setIsLoadingGoogleDriveApi","isFetchingGoogleDriveFiles","setIsFetchingGoogleDriveFiles","signedInUser","setSignedInUser","handleChange","file","listFiles","searchTerm","client","drive","files","list","pageSize","fields","q","then","response","res","JSON","parse","body","handleAuthClick","event","auth2","getAuthInstance","signIn","updateSigninStatus","isSignedIn","currentUser","je","Qt","handleSignOutClick","signOut","initClient","init","apiKey","clientId","discoveryDocs","scope","listen","get","error","handleClientLoad","load","showDocuments","onClose","width"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { Row, Col, Spin } from 'antd';\r\nimport styled from 'styled-components';\r\nimport { gapi } from 'gapi-script';\r\nimport GoogleDriveImage from '../../assets/images/google-drive.png';\r\nimport ListDocuments from '../ListDocuments';\r\nimport { style } from './styles';\r\n\r\nconst NewDocumentWrapper = styled.div`\r\n  ${style}\r\n`;\r\n\r\n// Client ID and API key from the Developer Console\r\nconst CLIENT_ID = process.env.REACT_APP_GOOGLE_DRIVE_CLIENT_ID;\r\nconst API_KEY = process.env.REACT_APP_GOOGLE_DRIVE_API_KEY;\r\n\r\n// Array of API discovery doc URLs for APIs\r\nconst DISCOVERY_DOCS = ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'];\r\n\r\n// Authorization scopes required by the API; multiple scopes can be\r\n// included, separated by spaces.\r\nconst SCOPES = 'https://www.googleapis.com/auth/drive.metadata.readonly';\r\n\r\nconst SelectSource = () => {\r\n  const [listDocumentsVisible, setListDocumentsVisibility] = useState(false);\r\n  const [documents, setDocuments] = useState([]);\r\n  const [isLoadingGoogleDriveApi, setIsLoadingGoogleDriveApi] = useState(false);\r\n  const [isFetchingGoogleDriveFiles, setIsFetchingGoogleDriveFiles] = useState(false);\r\n  const [signedInUser, setSignedInUser] = useState();\r\n  const handleChange = (file) => {};\r\n\r\n  /**\r\n   * Print files.\r\n   */\r\n  const listFiles = (searchTerm = null) => {\r\n    setIsFetchingGoogleDriveFiles(true);\r\n    gapi.client.drive.files\r\n      .list({\r\n        pageSize: 10,\r\n        fields: 'nextPageToken, files(id, name, mimeType, modifiedTime)',\r\n        q: searchTerm,\r\n      })\r\n      .then(function (response) {\r\n        setIsFetchingGoogleDriveFiles(false);\r\n        setListDocumentsVisibility(true);\r\n        const res = JSON.parse(response.body);\r\n        setDocuments(res.files);\r\n      });\r\n  };\r\n\r\n  /**\r\n   *  Sign in the user upon button click.\r\n   */\r\n  const handleAuthClick = (event) => {\r\n    gapi.auth2.getAuthInstance().signIn();\r\n  };\r\n\r\n  /**\r\n   *  Called when the signed in status changes, to update the UI\r\n   *  appropriately. After a sign-in, the API is called.\r\n   */\r\n  const updateSigninStatus = (isSignedIn) => {\r\n    if (isSignedIn) {\r\n      // Set the signed in user\r\n      setSignedInUser(gapi.auth2.getAuthInstance().currentUser.je.Qt);\r\n      setIsLoadingGoogleDriveApi(false);\r\n      // list files if user is authenticated\r\n      listFiles();\r\n    } else {\r\n      // prompt user to sign in\r\n      handleAuthClick();\r\n    }\r\n  };\r\n\r\n  /**\r\n   *  Sign out the user upon button click.\r\n   */\r\n  const handleSignOutClick = (event) => {\r\n    setListDocumentsVisibility(false);\r\n    gapi.auth2.getAuthInstance().signOut();\r\n  };\r\n\r\n  /**\r\n   *  Initializes the API client library and sets up sign-in state\r\n   *  listeners.\r\n   */\r\n  const initClient = () => {\r\n    setIsLoadingGoogleDriveApi(true);\r\n    gapi.client\r\n      .init({\r\n        apiKey: API_KEY,\r\n        clientId: CLIENT_ID,\r\n        discoveryDocs: DISCOVERY_DOCS,\r\n        scope: SCOPES,\r\n      })\r\n      .then(\r\n        function () {\r\n          // Listen for sign-in state changes.\r\n          gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);\r\n\r\n          // Handle the initial sign-in state.\r\n          updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\r\n        },\r\n        function (error) {}\r\n      );\r\n  };\r\n\r\n  const handleClientLoad = () => {\r\n    gapi.load('client:auth2', initClient);\r\n  };\r\n\r\n  const showDocuments = () => {\r\n    setListDocumentsVisibility(true);\r\n  };\r\n\r\n  const onClose = () => {\r\n    setListDocumentsVisibility(false);\r\n  };\r\n\r\n  return (\r\n    <NewDocumentWrapper>\r\n      <Row gutter={16} className=\"custom-row\">\r\n        <ListDocuments\r\n          visible={listDocumentsVisible}\r\n          onClose={onClose}\r\n          documents={documents}\r\n          onSearch={listFiles}\r\n          signedInUser={signedInUser}\r\n          onSignOut={handleSignOutClick}\r\n          isLoading={isFetchingGoogleDriveFiles}\r\n        />\r\n        <Col span={8}>\r\n          <Spin spinning={isLoadingGoogleDriveApi} style={{ width: '100%' }}>\r\n            <div onClick={() => handleClientLoad()} className=\"source-container\">\r\n              <div className=\"icon-container\">\r\n                <div className=\"icon icon-success\">\r\n                  <img height=\"80\" width=\"80\" src={GoogleDriveImage} />\r\n                </div>\r\n              </div>\r\n              <div className=\"content-container\">\r\n                <p className=\"title\">Google Drive</p>\r\n                <span className=\"content\">Import documents straight from your google drive</span>\r\n              </div>\r\n            </div>\r\n          </Spin>\r\n        </Col>\r\n      </Row>\r\n    </NewDocumentWrapper>\r\n  );\r\n};\r\n\r\nexport default SelectSource;"]},"metadata":{},"sourceType":"module"}